<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Create Account | AuthenticEdge</title>
  <link rel="stylesheet" href="theme.css" />
  <link rel="stylesheet" href="login.css" />
</head>
<body>

<header>
  <h1 class="logo">Authentic Edge</h1>
  <div class="menu-toggle">â˜°</div>

  <nav class="nav-menu" id="header-buttons">
    <!-- Dynamic buttons inserted by header.js -->
  </nav>
</header>


<section class="login-container">
  <h2>Create Account</h2>

  <input type="email" id="email" placeholder="Email" required />
  <input type="password" id="password" placeholder="Password" required />
  <button onclick="register()">Create Account</button>

  <p class="create-account-text">
    Already have an account?
    <a href="login.html">Login</a>
  </p>
</section>

<script>
    import { API_BASE_URL } from "./config.js";
async function register() {
  const email = document.getElementById("email").value.trim();
  const password = document.getElementById("password").value.trim();

  // Basic validation
  if (!email || !password) {
    alert("Please fill in all fields.");
    return;
  }
  if (!email.includes("@") || !email.includes(".")) {
    alert("Please enter a valid email address.");
    return;
  }

  try {
    const res = await fetch(`${API_BASE_URL}/api/register`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ email, password, role: "user" })
    });

    const data = await res.json();

    if (res.ok) {
      alert("Account created successfully! Redirecting to login...");
      window.location.replace("login.html");
    } else {
      alert(data.error || "Registration failed.");
    }
  } catch (err) {
    console.error(err);
    alert("Something went wrong. Please try again later.");
  }
}
</script>
<script src="header.js"></script>

</body>
</html>
